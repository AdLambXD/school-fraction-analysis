<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学生成绩可视化系统</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-lite/1.3.0/material.indigo-pink.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
        <header class="mdl-layout__header">
            <div class="mdl-layout__header-row">
                <span class="mdl-layout-title">学生成绩可视化系统</span>
                <div class="mdl-layout-spacer"></div>
                <button id="theme-toggle-button" class="mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons" id="theme-icon">brightness_7</i>
                </button>
            </div>
        </header>

        <main class="mdl-layout__content">
            <div class="page-content">
                <!-- Filters -->
                <div class="mdl-grid">
                    <div class="mdl-cell mdl-cell--4-col mdl-cell--12-col-tablet">
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <select class="mdl-textfield__input" id="exam-select"></select>
                            <label class="mdl-textfield__label" for="exam-select">1. 选择考试</label>
                        </div>
                    </div>
                    <div class="mdl-cell mdl-cell--4-col mdl-cell--12-col-tablet">
                         <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <select class="mdl-textfield__input" id="class-select" disabled></select>
                            <label class="mdl-textfield__label" for="class-select">2. 选择班级</label>
                        </div>
                    </div>
                    <div class="mdl-cell mdl-cell--4-col mdl-cell--12-col-tablet">
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <select class="mdl-textfield__input" id="student-select" disabled></select>
                            <label class="mdl-textfield__label" for="student-select">3. 选择学生</label>
                        </div>
                    </div>
                </div>

                <!-- Summary Card -->
                <div id="summary-card-container" class="mdl-card mdl-shadow--2dp student-card" style="display: none;">
                    <div class="mdl-card__title">
                        <i class="material-icons avatar">account_circle</i>
                        <div>
                            <h2 class="mdl-card__title-text" id="student-name"></h2>
                            <p id="student-class"></p>
                        </div>
                    </div>
                    <div class="mdl-card__supporting-text summary-container">
                        <div class="summary-main">
                            <div class="summary-total-box">
                                <div class="total-score-container">
                                    <p class="total-label">总分</p>
                                    <h3 id="total-score" class="total-score"></h3>
                                </div>
                            </div>
                            <div class="summary-subjects-box">
                                <div class="subject-item">
                                    <p class="subject-label">最高分科目</p>
                                    <h4 id="max-subject" class="subject-score"></h4>
                                </div>
                                <div class="subject-item">
                                    <p class="subject-label">最低分科目</p>
                                    <h4 id="min-subject" class="subject-score"></h4>
                                </div>
                            </div>
                        </div>
                        <div class="summary-stats-box">
                            <div class="average-container">
                                <p class="average-label">平均分</p>
                                <h3 id="average-score" class="average-score"></h3>
                            </div>
                            <div class="additional-stats">
                                <div class="stat-item">
                                    <i class="material-icons stat-icon" id="trend-icon">trending_flat</i>
                                    <span id="score-trend" class="stat-value">0</span>
                                </div>
                                <div class="stat-item">
                                    <i class="material-icons stat-icon">emoji_events</i>
                                    <span id="class-rank" class="stat-value">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Grades -->
                <div id="grades-container" style="display: none;">
                    <div class="section-header">
                        <h2 class="section-title">科目成绩详情</h2>
                        <button id="download-csv-btn" class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect">
                            <i class="material-icons">download</i>
                        </button>
                    </div>
                    <div class="table-container mdl-shadow--2dp">
                        <table class="mdl-data-table mdl-js-data-table">
                            <thead><tr><th class="mdl-data-table__cell--non-numeric">科目</th><th>成绩</th><th>等级</th><th>班级平均</th></tr></thead>
                            <tbody id="grades-table-body"></tbody>
                        </table>
                    </div>
                </div>

                <!-- Analysis Charts -->
                <div id="analysis-container" class="mdl-grid" style="display: none;">
                    <!-- Chart 1: Bar Chart -->
                    <div class="mdl-cell mdl-cell--6-col mdl-cell--12-col-tablet">
                        <div class="mdl-card mdl-shadow--2dp">
                            <div class="mdl-card__title">
                                <h2 class="mdl-card__title-text">科目成绩对比</h2>
                            </div>
                            <div class="mdl-card__supporting-text">
                                <canvas id="subject-comparison-chart"></canvas>
                            </div>
                        </div>
                    </div>
                    <!-- Chart 2: Radar Chart -->
                    <div class="mdl-cell mdl-cell--6-col mdl-cell--12-col-tablet">
                       <div class="mdl-card mdl-shadow--2dp">
                            <div class="mdl-card__title">
                                <h2 class="mdl-card__title-text">成绩雷达分析</h2>
                            </div>
                            <div class="mdl-card__supporting-text">
                                <canvas id="radar-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Historical Trend Chart -->
                <div id="trends-container" style="display: none;">
                    <h2 class="section-title">历史分数走向</h2>
                    <div class="mdl-card mdl-shadow--2dp">
                        <div class="mdl-card__supporting-text">
                            <div id="trend-filters">
                                <button class="mdl-button mdl-js-button mdl-js-ripple-effect trend-filter-btn active" data-filter="all">全部</button>
                                <button class="mdl-button mdl-js-button mdl-js-ripple-effect trend-filter-btn" data-filter="main">主科</button>
                                <button class="mdl-button mdl-js-button mdl-js-ripple-effect trend-filter-btn" data-filter="science">理科</button>
                                <button class="mdl-button mdl-js-button mdl-js-ripple-effect trend-filter-btn" data-filter="liberal">文科</button>
                            </div>
                            <canvas id="trend-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/material-design-lite/1.3.0/material.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <script src="script.js"></script>
</body>
</html>