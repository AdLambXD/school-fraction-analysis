<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学生成绩可视化系统</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/chart.css">
    <script src="https://unpkg.com/@capacitor/core@latest/dist/capacitor.js"></script>
    <script src="https://unpkg.com/@capacitor/filesystem@latest/dist/filesystem.js"></script>
</head>
<body>
    <div class="container">
        <!-- 应用头部 -->
        <header class="app-header">
            <h1 class="app-title">
                <i class="fas fa-graduation-cap"></i>
                学生成绩可视化系统
            </h1>
            <p class="app-subtitle">请选择考试、班级和学生查看成绩数据</p>
        </header>
        
                <!-- ... existing code ... -->
                        <!-- 选择器组 -->
                        <div class="selector-group">
                            <div class="selector-container">
                                <div class="selector-label" id="examSelectLabel">考试选择</div>
                                <select id="examSelect" class="selector" aria-labelledby="examSelectLabel">
                                    <option value="">请选择考试</option>
                                </select>
                                <div class="selector-icon">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                            
                            <div class="selector-container">
                                <div class="selector-label" id="classSelectLabel">班级选择</div>
                                <select id="classSelect" class="selector" disabled aria-labelledby="classSelectLabel">
                                    <option value="">请先选择考试</option>
                                </select>
                                <div class="selector-icon">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                            
                            <div class="selector-container">
                                <div class="selector-label" id="studentSelectLabel">学生选择</div>
                                <select id="studentSelect" class="selector" disabled aria-labelledby="studentSelectLabel">
                                    <option value="">请先选择班级</option>
                                </select>
                                <div class="selector-icon">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                        </div>
                <!-- ... existing code ... -->
        
        <!-- 数据提示 -->
        <div class="data-hint" id="dataHint">
            <i class="fas fa-mouse-pointer"></i>
            <p>请选择考试、班级和学生查看成绩数据</p>
        </div>
        
        <!-- 学生信息卡片 -->
        <div class="student-info" id="studentInfo">
            <div class="student-header">
                <div class="student-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="student-details">
                    <div class="student-name" id="studentName">--</div>
                    <div class="student-class" id="studentClass">--</div>
                </div>
            </div>
            
            <div class="student-stats">
                <div class="student-stat">
                    <div class="stat-label-sm">总分</div>
                    <div class="stat-value-lg" id="studentTotalScore">--</div>
                </div>
                <div class="student-stat">
                    <div class="stat-label-sm">平均分</div>
                    <div class="stat-value-lg" id="studentAvgScore">--</div>
                </div>
            </div>
        </div>
        
        <!-- 统计卡片 -->
        <div class="stats-grid" id="statsGrid">
            <div class="stat-card primary">
                <div class="stat-label">
                    <i class="fas fa-calculator"></i>
                    平均分
                </div>
                <div class="stat-value" id="avgScore">--</div>
                <div class="stat-change" id="scoreChange">
                    <i class="fas fa-arrow-up"></i>
                    <span>--%</span>
                </div>
            </div>
            
            <div class="stat-card secondary">
                <div class="stat-label">
                    <i class="fas fa-crown"></i>
                    最高分
                </div>
                <div class="stat-value" id="highestScore">--</div>
                <div class="stat-subtext" id="highestSubject">--</div>
            </div>
            
            <div class="stat-card warning">
                <div class="stat-label">
                    <i class="fas fa-arrow-down"></i>
                    最低分
                </div>
                <div class="stat-value" id="lowestScore">--</div>
                <div class="stat-subtext" id="lowestSubject">--</div>
            </div>
            
            <div class="stat-card success">
                <div class="stat-label">
                    <i class="fas fa-trophy"></i>
                    班级排名
                </div>
                <div class="stat-value" id="classRank">--</div>
                <div class="stat-subtext" id="rankPercent">--</div>
            </div>
        </div>
        
        <!-- 成绩表格 -->
        <section class="score-section" id="scoreSection">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-table"></i>
                    科目成绩详情
                </h2>
                <div class="section-actions">
                    <button class="action-btn" id="exportBtn" title="导出成绩数据">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="action-btn" id="fullscreenBtn" title="全屏显示">
                        <i class="fas fa-expand"></i>
                    </button>
                </div>
            </div>
            
            <div class="table-container">
                <table class="score-table">
                    <thead>
                        <tr>
                            <th>科目</th>
                            <th>成绩</th>
                            <th>等级</th>
                            <th>班级平均</th>
                            <th>排名</th>
                        </tr>
                    </thead>
                    <tbody id="scoreTableBody">
                        <tr>
                            <td colspan="5" class="loading-container">
                                <div class="loading-spinner"></div>
                                <p class="loading-text">加载成绩数据中...</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
        
        <!-- 图表容器网格 -->
        <div class="chart-grid">
            <!-- 趋势图表 -->
            <section class="chart-section" id="chartSection">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-chart-line"></i>
                        成绩趋势分析
                    </h2>
                    <div class="section-actions">
                        <button class="action-btn" id="exportChartBtn" title="导出图表">
                            <i class="fas fa-download"></i>
                        </button>
                        <button class="action-btn" id="refreshCharts" title="刷新图表">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">学期平均分趋势</h3>
                    </div>
                    
                    <div class="chart-filter">
                        <button class="filter-btn active">全部科目</button>
                        <button class="filter-btn">主科</button>
                        <button class="filter-btn">理科</button>
                        <button class="filter-btn">文科</button>
                    </div>
                    
                    <div class="chart-wrapper">
                        <canvas id="trendChart"></canvas>
                    </div>
                </div>
            </section>
            
            <!-- 科目对比图表 -->
            <section class="chart-section" id="subjectChartSection">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-chart-bar"></i>
                        科目成绩对比
                    </h2>
                </div>
                
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">当前学期科目对比</h3>
                    </div>
                    
                    <div class="chart-wrapper">
                        <canvas id="subjectChart"></canvas>
                    </div>
                </div>
            </section>
        </div>
        
        <!-- 底部导航 -->
        <nav class="bottom-nav">
            <a href="#" class="nav-item active">
                <i class="fas fa-home nav-icon"></i>
                <span>首页</span>
            </a>
            <a href="#" class="nav-item">
                <i class="fas fa-chart-line nav-icon"></i>
                <span>分析</span>
            </a>
            <a href="#" class="nav-item">
                <i class="fas fa-history nav-icon"></i>
                <span>历史</span>
            </a>
            <a href="#" class="nav-item">
                <i class="fas fa-user nav-icon"></i>
                <span>我的</span>
            </a>
        </nav>
    </div>
    
    <script src="js/data.js"></script>
    <script src="js/chart.js"></script>
    <script src="js/app.js"></script>
</body>
</html>